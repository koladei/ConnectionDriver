<?php

module_load_include('module', 'settings_provider');
$module_path = drupal_get_path('module', 'salesforce_settings_provider');
include_once str_replace('/', DIRECTORY_SEPARATOR, $module_path . '/forms/admin.inc');
include_once str_replace('/', DIRECTORY_SEPARATOR, $module_path . '/SalesforceConnectionDriver.php');

use com\mainone\middleware\SalesforceConnectionDriver;

/**
 * Implements hook_permission
 * @return array
 */
function salesforce_settings_provider_permission()
{
    $permission = [];
    return $permission;
}

function salesforce_settings_provider_connection_driver_salesforce_alter(&$container)
{
    $connection_settings = salesforce_settings_provider__get_settings();
    $driver = new SalesforceConnectionDriver(function ($x) {
        return mware_connection_driver__get_driver($x);
    }, function () {
    }, 'salesforce', $connection_settings);

    $defs = salesforce_settings_provider__get_entity_definitions();
    $driver->setEntities($defs);
    $container['salesforce'] = $driver;
}

function salesforce_settings_provider__user_access($args)
{
    return true;
}

/**
 * Returns the connection settings with which to connect to salesforce.
 * @return \stdClass
 */
function salesforce_settings_provider__get_settings($settings = 'default')
{
    $s = new stdClass();
    $sT = $settings == 'default' ? variable_get('SALESFORCE_SETTINGS_USE_PRODUCTION', false) : ($settings == 'production' ? true : false);

    if ($sT == false) {
        $s->URL = variable_get('SALESFORCE_SANDBOX_SETTINGS_ENDPOINT_URL');
        $s->Username = variable_get('SALESFORCE_SANDBOX_SETTINGS_USERNAME');
        $s->Password = variable_get('SALESFORCE_SANDBOX_SETTINGS_PASSWORD');
        $s->GrantType = variable_get('SALESFORCE_SANDBOX_SETTINGS_GRANT_TYPE');
        $s->ClientID = variable_get('SALESFORCE_SANDBOX_SETTINGS_CLIENT_ID');
        $s->ClientSecret = variable_get('SALESFORCE_SANDBOX_SETTINGS_CLIENT_SECRET');
        $s->ProxyServer = variable_get('SALESFORCE_PROXY_SERVER');
        $s->ProxyServerPort = variable_get('SALESFORCE_PROXY_SERVER_PORT');
        $s->UseProxyServer = variable_get('SALESFORCE_SANDBOX_SETTINGS_USE_PROXY');
    } else {
        $s->URL = variable_get('SALESFORCE_SETTINGS_ENDPOINT_URL');
        $s->Username = variable_get('SALESFORCE_SETTINGS_USERNAME');
        $s->Password = variable_get('SALESFORCE_SETTINGS_PASSWORD');
        $s->GrantType = variable_get('SALESFORCE_SETTINGS_GRANT_TYPE');
        $s->ClientID = variable_get('SALESFORCE_SETTINGS_CLIENT_ID');
        $s->ClientSecret = variable_get('SALESFORCE_SETTINGS_CLIENT_SECRET');
        $s->ProxyServer = variable_get('SALESFORCE_PROXY_SERVER');
        $s->ProxyServerPort = variable_get('SALESFORCE_PROXY_SERVER_PORT');
        $s->UseProxyServer = variable_get('SALESFORCE_SETTINGS_USE_PROXY');
    }
    return $s;
}

/**
 * Returns entity definitions that have been marked as cacheable to the specified entity.
 *
 * @param String $targetDriver the connection driver to use to retrieve the cache.
 * @return void
 */
function salesforce_settings_provider__get_cached_entity_definitions($targetDriver)
{
    return settings_provider__format_cached_definition('salesforce', $targetDriver, function(){
        $args = func_get_args();
        return salesforce_settings_provider__get_entity_definitions(...$args);
    });
}

/**
 * Returns the full definition of an entity or the definition of the specified component.
 * Components include: fields, internal_name
 * @param string $entity_name
 * @param string $component
 * @return array
 */
function salesforce_settings_provider__get_entity_definitions()
{
    return [
        'record_types' => [
            'internal_name' => 'RecordType'
            , 'cache_to' => 'sql'
            , 'cache_freq' => 360
            , 'fields' => [
                'Id' => [
                    'preferred_name' => 'Id'
                    , 'type' => 'string'
                    , 'mandatory' => 1,
                ]
                , 'Name' => [
                    'preferred_name' => 'Name'
                    , 'type' => 'string'
                    , 'mandatory' => 1,
                ]
                , 'DeveloperName' => [
                    'preferred_name' => 'DeveloperName'
                    , 'type' => 'string'
                ]
                , 'CreatedDate' => [
                    'preferred_name' => 'Created'
                    , 'type' => 'datetime'
                ]
                , 'CreatedById' => [
                    'preferred_name' => 'CreatedBy'
                    , 'type' => 'string'
                    , 'relationship' => [
                        'local_field' => 'CreatedBy'
                        , 'preferred_local_key_name' => 'CreatedById'
                        , 'remote_field' => 'Id'
                        , 'remote_type' => 'parent'
                        , 'remote_entity' => 'salesforce_user'
                    ]
                ]
                , 'LastModifiedDate' => [
                    'preferred_name' => 'Modified'
                    , 'type' => 'datetime'
                ]
                , 'LastModifiedById' => [
                    'preferred_name' => 'ModifiedBy'
                    , 'type' => 'string'
                    , 'relationship' => [
                        'local_field' => 'ModifiedBy'
                        , 'preferred_local_key_name' => 'ModifiedById'
                        , 'remote_field' => 'Id'
                        , 'remote_type' => 'parent'
                        , 'remote_entity' => 'salesforce_user'
                    ]
                ]
                , 'NamespacePrefix' => [
                    'preferred_name' => 'NamespacePrefix'
                    , 'type' => 'string'
                ]
                , 'BusinessProcessId' => [
                    'preferred_name' => 'BusinessProcessId'
                    , 'type' => 'string'
                ]
                , 'Description' => [
                    'preferred_name' => 'Description'
                    , 'type' => 'string'
                ]
                , 'SobjectType' => [
                    'preferred_name' => 'SObjectType'
                    , 'type' => 'string'
                ]
                , 'SystemModstamp' => [
                    'preferred_name' => 'SystemModstamp'
                    , 'type' => 'datetime'
                ]
            ]
        ]
        , 'cash_inflow' => [
            'internal_name' => 'Cash_Inflow__c'
            , 'fields' => [
                'Name' => [
                    'preferred_name' => 'Name'
                    , 'type' => 'string'
                    , 'mandatory' => 1,
                ]
                , 'LastModifiedDate' => [
                    'preferred_name' => 'Modified'
                    , 'type' => 'datetime'
                ]
                , 'CreatedDate' => [
                    'preferred_name' => 'Created'
                    , 'type' => 'datetime'
                ]
                , 'Due_Date__c' => [
                    'preferred_name' => 'DueDate'
                    , 'type' => 'datetime'
                ]
                , 'Year__c' => [
                    'preferred_name' => 'Year'
                    , 'type' => 'integer'
                ]
                , 'Value_Date__c' => [
                    'preferred_name' => 'ValueDate'
                    , 'type' => 'datetime'
                ]
                , 'Type__c' => [
                    'preferred_name' => 'Type'
                    , 'type' => 'string'
                ]
                , 'Amount__c' => [
                    'preferred_name' => 'Amount'
                    , 'type' => 'string'
                ]
                , 'Commission__c' => [
                    'preferred_name' => 'Commission'
                    , 'type' => 'string'
                ]
                , 'Conversion_Rate__c' => [
                    'preferred_name' => 'ConversionRate'
                    , 'type' => 'string'
                ]
                , 'Commission_Computed__c' => [
                    'preferred_name' => 'CommissionComputed'
                    , 'type' => 'string'
                ]
                , 'Narrative__c' => [
                    'preferred_name' => 'Narrative'
                    , 'type' => 'string'
                ]
                , 'Original_Currency__c' => [
                    'preferred_name' => 'Currency'
                    , 'type' => 'string'
                ]
                , 'Commission_Rate__c' => [
                    'preferred_name' => 'CommissionRate'
                    , 'type' => 'int'
                ]
                , 'Age_Of_Payment__c' => [
                    'preferred_name' => 'AgeOfPayment'
                    , 'type' => 'int'
                ]
                , 'ExchangeRate__c' => [
                    'preferred_name' => 'ExchangeRate'
                    , 'type' => 'int'
                ]
                , 'Quarter__c' => [
                    'preferred_name' => 'Quarter'
                    , 'type' => 'int'
                ]
                , 'TransLineId__c' => [
                    'preferred_name' => 'TransactionLineId'
                    , 'type' => 'string'
                    , 'mandatory' => 1
                ]
                , 'Invoice__c' => [
                    'preferred_name' => 'InvoiceNumber'
                    , 'type' => 'string'
                    , 'mandatory' => 1
                ]
                , 'Id' => [
                    'preferred_name' => 'Id'
                    , 'type' => 'string'
                    , 'mandatory' => 1,
                ]
                , 'Account_Manager__c' => [
                    'preferred_name' => 'AccountManager'
                    , 'type' => 'string'
                    , 'relationship' => [
                        'local_field' => 'AccountManager'
                        , 'preferred_local_key_name' => 'AccountManagerId'
                        , 'remote_field' => 'Id'
                        , 'remote_type' => 'parent'
                        , 'remote_entity' => 'salesforce_user'
                    ],
                ]
                , 'Related_Account__c' => [
                    'preferred_name' => 'Account'
                    , 'type' => 'string'
                    , 'relationship' => [
                        'local_field' => 'Account'
                        , 'preferred_local_key_name' => 'AcoountId'
                        , 'remote_field' => 'Id'
                        , 'remote_type' => 'parent'
                        , 'remote_entity' => 'account'
                    ],
                ]
                , 'Related_Opportunity__c' => [
                    'preferred_name' => 'Opportunity'
                    , 'type' => 'string'
                    , 'lookup_entity' => 'opportunity'
                    , 'relationship' => [
                        'local_field' => 'Opportunity'
                        , 'preferred_local_key_name' => 'OpportunityId'
                        , 'remote_field' => 'Id'
                        , 'remote_type' => 'parent'
                        , 'remote_entity' => 'opportunity'
                    ],
                ]
                , 'Related_Customer_Product__c' => [
                    'preferred_name' => 'CustomerProduct'
                    , 'type' => 'string'
                    , 'lookup_entity' => 'customer_product'
                    , 'relationship' => [
                        'local_field' => 'CustomerProduct'
                        , 'preferred_local_key_name' => 'CustomerProductId'
                        , 'remote_field' => 'Id'
                        , 'remote_type' => 'parent'
                        , 'remote_entity' => 'customer_product'
                    ],
                ]
                , 'Related_Payable_Commission__c' => [
                    'preferred_name' => 'PayableCommission'
                    , 'type' => 'string'
                    , 'relationship' => [
                        'local_field' => 'PayableCommission'
                        , 'preferred_local_key_name' => 'PayableCommissionId'
                        , 'remote_field' => 'Id'
                        , 'remote_type' => 'parent'
                        , 'remote_entity' => 'payable_commission'
                    ],
                ],
            ]
        ]
        , 'customer_product' => [
            'internal_name' => 'Customer_Products__c'
            , 'cache_to' => 'sql'
            , 'cache_freq' => 5
            , 'fields' => [
                'Id' => [
                    'preferred_name' => 'Id'
                    , 'type' => 'string'
                    , 'mandatory' => 1,
                ]
                , 'Name' => [
                    'preferred_name' => 'Name'
                    , 'type' => 'string'
                    , 'mandatory' => 1,
                ]
                , 'RecordTypeId' => [
                    'preferred_name' => 'Type'
                    , 'type' => 'string'
                    , 'relationship' => [
                        'local_field' => 'Type'
                        , 'preferred_local_key_name' => 'TypeId'
                        , 'remote_field' => 'Id'
                        , 'remote_type' => 'parent'
                        , 'remote_entity' => 'record_types'
                        , 'remote_driver' => 'salesforce'
                    ]
                ]
                , 'CreatedDate' => [
                    'preferred_name' => 'Created'
                    , 'type' => 'datetime'
                ]
                , 'CreatedById' => [
                    'preferred_name' => 'CreatedBy'
                    , 'type' => 'string'
                    , 'relationship' => [
                        'local_field' => 'CreatedBy'
                        , 'preferred_local_key_name' => 'CreatedById'
                        , 'remote_field' => 'Id'
                        , 'remote_type' => 'parent'
                        , 'remote_entity' => 'salesforce_user'
                    ]
                ]
                , 'LastModifiedDate' => [
                    'preferred_name' => 'Modified'
                    , 'type' => 'datetime'
                ]
                , 'LastModifiedById' => [
                    'preferred_name' => 'ModifiedBy'
                    , 'type' => 'string'
                    , 'relationship' => [
                        'local_field' => 'ModifiedBy'
                        , 'preferred_local_key_name' => 'ModifiedById'
                        , 'remote_field' => 'Id'
                        , 'remote_type' => 'parent'
                        , 'remote_entity' => 'salesforce_user'
                    ]
                ]
                , 'Auxiliary_Circuit_ID__c' => [
                    'preferred_name' => 'AuxiliaryCircuitID'
                    , 'type' => 'string'
                ]
                , 'Service_Account_ID__c' => [
                    'preferred_name' => 'ServiceAccount'
                    , 'type' => 'string'
                    , 'relationship' => [
                        'local_field' => 'ServiceAccount'
                        , 'preferred_local_key_name' => 'ServiceAccountId'
                        , 'remote_field' => 'Id'
                        , 'remote_type' => 'parent'
                        , 'remote_entity' => 'account'
                        , 'remote_driver' => 'bmc_remedy'
                    ]
                ]
                , 'Status__c' => [
                    'preferred_name' => 'Status'
                    , 'type' => 'string'
                ]
                , 'Description__c' => [
                    'preferred_name' => 'Description'
                    , 'type' => 'string'
                ]
                , 'Billing_Start_Date__c' => [
                    'preferred_name' => 'BillingStartDate'
                    , 'type' => 'date'
                ]
                , 'Product_Type__c' => [
                    'preferred_name' => 'SubType'
                    , 'type' => 'string'
                ]
                , 'MRC__c' => [
                    'preferred_name' => 'MRC'
                    , 'type' => 'int'
                ]
                , 'NRC__c' => [
                    'preferred_name' => 'NRC'
                    , 'type' => 'int'
                ]
                , 'POP__c' => [
                    'preferred_name' => 'POP'
                    , 'type' => 'string'
                ]
                , 'State__c' => [
                    'preferred_name' => 'State'
                    , 'type' => 'string'
                ]
                , 'Suspended__c' => [
                    'preferred_name' => 'Suspended'
                    , 'type' => 'datetime'
                ]
                , 'Deactivated__c' => [
                    'preferred_name' => 'Deactivated'
                    , 'type' => 'datetime'
                ]
                , 'Activated__c' => [
                    'preferred_name' => 'Activated'
                    , 'type' => 'datetime'
                ]
                , 'Reactivated__c' => [
                    'preferred_name' => 'Reactivated'
                    , 'type' => 'datetime'
                ]
                , 'Units__c' => [
                    'preferred_name' => 'Capacity'
                    , 'type' => 'int'
                ]
                , 'Burst_Capacity__c' => [
                    'preferred_name' => 'BurstCapacity'
                    , 'type' => 'int'
                ]
                , 'Unit_Of_Measure__c' => [
                    'preferred_name' => 'UnitOfMeasure'
                    , 'type' => 'string'
                ]
                , 'Last_Mile__c' => [
                    'preferred_name' => 'LastMile'
                    , 'type' => 'string'
                ]
                , 'Account__c' => [
                    'preferred_name' => 'Account'
                    , 'type' => 'string'
                    , 'mandatory' => 1
                    , 'relationship' => [
                        'local_field' => 'Account'
                        , 'preferred_local_key_name' => 'AccountId'
                        , 'remote_field' => 'Id'
                        , 'remote_type' => 'parent'
                        , 'remote_entity' => 'account'
                    ]
                ]
                , 'Opportunity__c' => [
                    'preferred_name' => 'Opportunity'
                    , 'type' => 'string'
                    , 'relationship' => [
                        'local_field' => 'Account'
                        , 'preferred_local_key_name' => 'AccountId'
                        , 'remote_field' => 'Id'
                        , 'remote_type' => 'parent'
                        , 'remote_entity' => 'account'
                    ]
                ]
                , '_CashInflows' => [
                    'preferred_name' => 'CashInflows'
                    , 'type' => 'detail'
                    , 'relationship' => [
                        'local_field' => 'Id'
                        , 'remote_field' => 'CustomerProduct'
                        , 'remote_type' => 'child'
                        , 'remote_entity' => 'cash_inflow'
                    ],
                ],
            ]
        ]
        , 'payable_commission' => [
            'internal_name' => 'Payable_Commission__c'
            , 'fields' => [
                'Name' => [
                    'preferred_name' => 'Name'
                    , 'type' => 'string'
                    , 'mandatory' => 1,
                ]
                , 'Id' => [
                    'preferred_name' => 'Id'
                    , 'type' => 'string'
                    , 'mandatory' => 1,
                ]
                , 'LastModifiedDate' => [
                    'preferred_name' => 'Modified'
                    , 'type' => 'datetime'
                ]
                , 'CreatedDate' => [
                    'preferred_name' => 'Created'
                    , 'type' => 'datetime'
                ]
                , 'End_Of_Quarter__c' => [
                    'preferred_name' => 'EndOfQuarter'
                    , 'type' => 'datetime'
                ]
                , 'Amount_Paid__c' => [
                    'preferred_name' => 'AmountPaid'
                    , 'type' => 'int'
                ]
                , 'Amount_Unpaid__c' => [
                    'preferred_name' => 'AmountDue'
                    , 'type' => 'int'
                ]
                , 'Cash_Amount__c' => [
                    'preferred_name' => 'CashAmount'
                    , 'type' => 'int'
                ]
                , 'Sale_Amount__c' => [
                    'preferred_name' => 'SaleAmount'
                    , 'type' => 'int'
                ]
                , 'Carry_Over_Amount__c' => [
                    'preferred_name' => 'CarryOverAmount'
                    , 'type' => 'int'
                ]
                , 'Total__c' => [
                    'preferred_name' => 'Total'
                    , 'type' => 'int'
                ]
                , 'Year__c' => [
                    'preferred_name' => 'Year'
                    , 'type' => 'int'
                ]
                , 'Quarter__c' => [
                    'preferred_name' => 'Quarter'
                    , 'type' => 'int'
                ]
                , 'Trigger_Calculation__c' => [
                    'preferred_name' => 'TriggerCalculation'
                    , 'type' => 'int'
                ]
                , 'Days_To_Quarter_End__c' => [
                    'preferred_name' => 'DaysToQuarterEnd'
                    , 'type' => 'int'
                ]
                , 'Currency__c' => [
                    'preferred_name' => 'Currency'
                    , 'type' => 'string'
                ]
                , 'Payment_Status__c' => [
                    'preferred_name' => 'PaymentStatus'
                    , 'type' => 'string'
                ]
                , 'Account_Manager__c' => [
                    'preferred_name' => 'AccountManager'
                    , 'type' => 'string'
                    , 'relationship' => [
                        'local_field' => 'AccountManager'
                        , 'preferred_local_key_name' => 'AccountManagerId'
                        , 'remote_field' => 'Id'
                        , 'remote_type' => 'parent'
                        , 'remote_entity' => 'salesforce_user'
                    ]
                ]
                , 'Carried_To__c' => [
                    'preferred_name' => 'CarriedTo'
                    , 'type' => 'string'
                    , 'relationship' => [
                        'local_field' => 'CarriedTo'
                        , 'preferred_local_key_name' => 'CarriedToId'
                        , 'remote_field' => 'Id'
                        , 'remote_type' => 'parent'
                        , 'remote_entity' => 'payable_commission'
                    ]
                ]
                , '_Inflows' => [
                    'preferred_name' => 'CashInflows'
                    , 'type' => 'detail'
                    , 'relationship' => [
                        'local_field' => 'Id'
                        , 'remote_field' => 'PayableCommission'
                        , 'remote_type' => 'child'
                        , 'remote_entity' => 'cash_inflow'
                    ]
                ]
            ]
        ]
        , 'account' => [
            'internal_name' => 'Account'
            , 'cache_to' => 'sql'
            , 'cache_freq' => 5
            , 'fields' => [
                'Industry' => [
                    'preferred_name' => 'Industry'
                    , 'type' => 'string',
                ]
                , 'Name' => [
                    'preferred_name' => 'Name'
                    , 'type' => 'string'
                    , 'mandatory' => 1,
                ]
                , 'LastModifiedDate' => [
                    'preferred_name' => 'Modified'
                    , 'type' => 'datetime'
                ]
                , 'CreatedDate' => [
                    'preferred_name' => 'Created'
                    , 'type' => 'datetime'
                ]
                , 'Id' => [
                    'preferred_name' => 'Id'
                    , 'type' => 'string'
                    , 'mandatory' => 1,
                ]
                , 'Customer_Rating__c' => [
                    'preferred_name' => 'Rating'
                    , 'type' => 'string'
                ]
                , 'GCID__c' => [
                    'preferred_name' => 'GCID'
                    , 'type' => 'string'
                    , 'mandatory' => 1,
                ]
                , 'Status__c' => [
                    'preferred_name' => 'Status'
                    , 'type' => 'string',
                ]
                , 'Number_Of_Active_Products__c' => [
                    'preferred_name' => 'NumberOfActiveProducts'
                    , 'type' => 'string',
                ]
                , 'Number_Of_Products__c' => [
                    'preferred_name' => 'NumberOfProducts'
                    , 'type' => 'string',
                ]
                , 'Email_address__c' => [
                    'preferred_name' => 'Email'
                    , 'type' => 'string',
                ]
                , 'BillingAddress' => [
                    'preferred_name' => 'BillingAddress'
                    , 'type' => 'string',
                ]
                , 'ShippingAddress' => [
                    'preferred_name' => 'ShippingAddress'
                    , 'type' => 'string',
                ]
                , 'Phone' => [
                    'preferred_name' => 'Phone'
                    , 'type' => 'string',
                ]
                , 'Primary_Sector__c' => [
                    'preferred_name' => 'PrimarySector'
                    , 'type' => 'string'
                    , 'relationship' => [
                        'local_field' => 'PrimarySector'
                        , 'preferred_local_key_name' => 'PrimarySectorId'
                        , 'remote_field' => 'Id'
                        , 'remote_type' => 'parent'
                        , 'remote_entity' => 'sales_sector'
                    ]
                ]
                , 'OwnerId' => [
                    'preferred_name' => 'Owner'
                    , 'type' => 'string'
                    , 'relationship' => [
                        'local_field' => 'Owner'
                        , 'preferred_local_key_name' => 'OwnerId'
                        , 'remote_field' => 'Id'
                        , 'remote_type' => 'parent'
                        , 'remote_entity' => 'salesforce_user'
                    ]
                ]
                , 'Description' => [
                    'preferred_name' => 'Description'
                    , 'type' => 'string',
                ]
                , 'Currency__c' => [
                    'preferred_name' => 'Currency'
                    , 'type' => 'string',
                ]
                , '_Opportunities' => [
                    'preferred_name' => 'Opportunities'
                    , 'type' => 'detail'
                    , 'relationship' => [
                        'local_field' => 'Id'
                        , 'remote_field' => 'Account'
                        , 'remote_type' => 'child'
                        , 'remote_entity' => 'opportunity'
                        , 'filter' => 'StageName ne \'Opportunity Abandoned\' and StageName ne \'Closed/Lost\''
                    ],
                ]
                , '_Products' => [
                    'preferred_name' => 'Products'
                    , 'type' => 'detail'
                    , 'relationship' => [
                        'local_field' => 'Id'
                        , 'remote_field' => 'Account'
                        , 'remote_type' => 'child'
                        , 'remote_entity' => 'customer_product'
                    ],
                ]
                , '_CashInflows' => [
                    'preferred_name' => 'CashInflows'
                    , 'type' => 'detail'
                    , 'relationship' => [
                        'local_field' => 'Id'
                        , 'remote_field' => 'Account'
                        , 'remote_type' => 'child'
                        , 'remote_entity' => 'cash_inflow'
                    ],
                ],
            ]
        ]
        , 'opportunity' => [
            'internal_name' => 'Opportunity'
            , 'fields' => [
                'Name' => [
                    'preferred_name' => 'Name'
                    , 'type' => 'string'
                    , 'mandatory' => 1,
                ]
                , 'LastModifiedDate' => [
                    'preferred_name' => 'Modified'
                    , 'type' => 'datetime'
                ]
                , 'CreatedDate' => [
                    'preferred_name' => 'Created'
                    , 'type' => 'datetime'
                ]
                , 'Auxiliary_Circuit_ID__c' => [
                    'preferred_name' => 'AuxiliaryCircuitID'
                    , 'type' => 'string'
                ]
                , 'Id' => [
                    'preferred_name' => 'Id'
                    , 'type' => 'string'
                    , 'mandatory' => 1,
                ]
                , 'Book_Status__c' => [
                    'preferred_name' => 'BookStatus'
                    , 'type' => 'string'
                ]
                , 'Feasibility_Status__c' => [
                    'preferred_name' => 'FeasibilityStatus'
                    , 'type' => 'string'
                ]
                , 'Feasibility_Request_Status__c' => [
                    'preferred_name' => 'FeasibilityRequestStatus'
                    , 'type' => 'string'
                ]
                , 'Negotiation_Status__c' => [
                    'preferred_name' => 'NegotiationStatus'
                    , 'type' => 'string'
                ]
                , 'Commitment_Status__c' => [
                    'preferred_name' => 'CommitmentStatus'
                    , 'type' => 'string'
                ]
                , 'Network_Option__c' => [
                    'preferred_name' => 'NetworkOption'
                    , 'type' => 'string'
                ]
                , 'Sale_Type__c' => [
                    'preferred_name' => 'SaleType'
                    , 'type' => 'string'
                ]
                , 'Amount__c' => [
                    'preferred_name' => 'Amount'
                    , 'type' => 'string'
                ]
                , 'Currency_of_Payment__c' => [
                    'preferred_name' => 'CurrencyOfPayment'
                    , 'type' => 'string'
                ]
                , 'StageName' => [
                    'preferred_name' => 'StageName'
                    , 'type' => 'string'
                ]
                , 'Probability' => [
                    'preferred_name' => 'Probability'
                    , 'type' => 'string'
                ]
                , 'Exchange_Rate__c' => [
                    'preferred_name' => 'ExchangeRate'
                    , 'type' => 'string'
                ]
                , 'Feasibility_Outcome__c' => [
                    'preferred_name' => 'FeasibilityOutcome'
                    , 'type' => 'string'
                ]
                , 'OwnerId' => [
                    'preferred_name' => 'Owner'
                    , 'type' => 'string'
                    , 'relationship' => [
                        'local_field' => 'Owner'
                        , 'remote_field' => 'Id'
                        , 'remote_type' => 'parent'
                        , 'remote_entity' => 'salesforce_user'
                    ]
                ]
                , 'Parent_Opportunity__c' => [
                    'preferred_name' => 'ParentOpportunity'
                    , 'type' => 'string'
                    , 'lookup_entity' => 'opportunity'
                ]
                , 'AccountId' => [
                    'preferred_name' => 'Account'
                    , 'type' => 'string'
                    , 'mandatory' => 1
                    , 'relationship' => [
                        'local_field' => 'Account'
                        , 'remote_field' => 'Id'
                        , 'remote_type' => 'parent'
                        , 'remote_entity' => 'account'
                    ],
                ]
                , '_Opportunities' => [
                    'preferred_name' => 'Opportunities'
                    , 'type' => 'detail'
                    , 'relationship' => [
                        'local_field' => 'ParentOpportunity'
                        , 'remote_field' => 'Id'
                        , 'remote_type' => 'parent'
                        , 'remote_entity' => 'opportunity'
                    ],
                ]
                , '_Products' => [
                    'preferred_name' => 'Products'
                    , 'type' => 'detail'
                    , 'relationship' => [
                        'local_field' => 'Id'
                        , 'remote_field' => 'Opportunity'
                        , 'remote_type' => 'child'
                        , 'remote_entity' => 'customer_product'
                    ],
                ]
                , '_CashInflows' => [
                    'preferred_name' => 'CashInflows'
                    , 'type' => 'detail'
                    , 'relationship' => [
                        'local_field' => 'Id'
                        , 'remote_field' => 'Opportunity'
                        , 'remote_type' => 'child'
                        , 'remote_entity' => 'cash_inflow'
                    ],
                ],
            ],
        ]
        , 'salesforce_user' => [
            'internal_name' => 'User'
            , 'cache_to' => 'sql'
            , 'cache_freq' => 7200
            , 'fields' => [
                'Name' => [
                    'preferred_name' => 'Name'
                    , 'type' => 'string'
                ]
                , 'LastModifiedDate' => [
                    'preferred_name' => 'Modified'
                    , 'type' => 'datetime'
                ]
                , 'CreatedDate' => [
                    'preferred_name' => 'Created'
                    , 'type' => 'datetime'
                ]
                , 'Email' => [
                    'preferred_name' => 'Email'
                    , 'type' => 'string'
                ]
                , 'Username' => [
                    'preferred_name' => 'Username'
                    , 'type' => 'string'
                ]
                , 'MobilePhone' => [
                    'preferred_name' => 'Phone'
                    , 'type' => 'string'
                ]
                , 'Id' => [
                    'preferred_name' => 'Id'
                    , 'type' => 'string'
                    , 'mandatory' => 1
                ]
                , '_Accounts' => [
                    'preferred_name' => 'Accounts'
                    , 'type' => 'detail'
                    , 'relationship' => [
                        'local_field' => 'Id'
                        , 'remote_field' => 'Owner'
                        , 'remote_type' => 'child'
                        , 'remote_entity' => 'account'
                    ],
                ]
                , '_Opportunities' => [
                    'preferred_name' => 'Opportunities'
                    , 'type' => 'detail'
                    , 'relationship' => [
                        'local_field' => 'Id'
                        , 'remote_field' => 'Owner'
                        , 'remote_type' => 'child'
                        , 'remote_entity' => 'opportunity'
                    ],
                ],
            ],
        ]
        , 'sales_target' => [
            'internal_name' => 'SalesTarget'
            , 'fields' => [
                'Name' => [
                    'preferred_name' => 'Name'
                    , 'type' => 'string'
                ]
                , 'LastModifiedDate' => [
                    'preferred_name' => 'Modified'
                    , 'type' => 'datetime'
                ]
                , 'CreatedDate' => [
                    'preferred_name' => 'Created'
                    , 'type' => 'datetime'
                ]
                , 'Year' => [
                    'preferred_name' => 'Year__c'
                    , 'type' => 'int'
                ]
                , 'Q1_Target__c' => [
                    'preferred_name' => 'Q1Target'
                    , 'type' => 'int'
                ]
                , 'Q2_Target__c' => [
                    'preferred_name' => 'Q2Target'
                    , 'type' => 'int'
                ]
                , 'Q3_Target__c' => [
                    'preferred_name' => 'Q3Target'
                    , 'type' => 'int'
                ]
                , 'Q4_Target__c' => [
                    'preferred_name' => 'Q4Target'
                    , 'type' => 'int'
                ]
                , 'Q1_Cash_Target__c' => [
                    'preferred_name' => 'Q1CashTarget'
                    , 'type' => 'int'
                ]
                , 'Q2_Cash_Target__c' => [
                    'preferred_name' => 'Q2CashTarget'
                    , 'type' => 'int'
                ]
                , 'Q3_Cash_Target__c' => [
                    'preferred_name' => 'Q3CashTarget'
                    , 'type' => 'int'
                ]
                , 'Q4_Cash_Target__c' => [
                    'preferred_name' => 'Q4CashTarget'
                    , 'type' => 'int'
                ]
            ],
        ]
        , 'sales_sector' => [
            'internal_name' => 'Sales_Sector__c'
            , 'fields' => [
                'Name' => [
                    'preferred_name' => 'Name'
                    , 'type' => 'string'
                ]
                , 'LastModifiedDate' => [
                    'preferred_name' => 'Modified'
                    , 'type' => 'datetime'
                ]
                , 'CreatedDate' => [
                    'preferred_name' => 'Created'
                    , 'type' => 'datetime'
                ]
                , 'Parent__c' => [
                    'preferred_name' => 'ParentSector'
                    , 'type' => 'string'
                    , 'relationship' => [
                        'local_field' => 'ParentSector'
                        , 'preferred_local_key_name' => 'ParentSectorId'
                        , 'remote_field' => 'Id'
                        , 'remote_type' => 'parent'
                        , 'remote_entity' => 'sales_sector'
                    ]
                ]
                , '_Accounts' => [
                    'preferred_name' => 'Accounts'
                    , 'type' => 'detail'
                    , 'relationship' => [
                        'local_field' => 'Id'
                        , 'remote_field' => 'Sector'
                        , 'remote_type' => 'child'
                        , 'remote_entity' => 'account'
                    ],
                ]
            ]
        ]
    ];
}
